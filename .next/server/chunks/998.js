"use strict";exports.id=998,exports.ids=[998],exports.modules={109:(e,t,a)=>{a.d(t,{M:()=>r,h:()=>l});let i=null,r=e=>{i=e},l=()=>i},5998:(e,t,a)=>{a.a(e,async(e,i)=>{try{a.r(t),a.d(t,{apiTool:()=>h});var r=a(109),l=a(8941),n=a(2048),o=a(5315),s=a(7360),p=a(9648),d=a(9801),f=a(4770),c=e([p]);p=(c.then?(await c)():c)[0];let u=["pdf","jpg","jpeg","png","gif","svg","webp","bmp","tiff"],h={function:async({file:e})=>{let t=process.env.PAYTAL_API_URL,a=(0,r.h)(),i=null;try{let r;if(e.startsWith("data:")||/^[A-Za-z0-9+/=\n\r]+$/.test(e)){let t=e.replace(/^data:.*;base64,/,""),a=Buffer.from(t,"base64"),l="bin",s=e.match(/^data:(.+?);base64,/);if(s){let e=s[1],t=u.find(t=>e.includes(t));t&&(l=t)}i=o.join(d.tmpdir(),`upload-${(0,f.randomBytes)(6).toString("hex")}.${l}`),n.writeFileSync(i,a),r=i}else e.startsWith("file://")&&(e=(0,s.fileURLToPath)(e)),r=o.resolve(e);!function(e){let t=o.extname(e).slice(1).toLowerCase();if(!u.includes(t))throw Error(`Invalid file type .${t}. Allowed types: ${u.join(", ")}`)}(r);let c=new l;c.append("file",n.createReadStream(r));let h={...c.getHeaders(),Authorization:`Bearer ${a}`,Accept:"application/json"};return(await p.default.post(`${t}/upload`,c,{headers:h})).data}catch(e){return{error:`An error occurred while uploading the file: ${e instanceof Error?e.message:JSON.stringify(e.response?.data||e)}`}}finally{if(i)try{n.unlinkSync(i)}catch(e){}}},definition:{type:"function",function:{name:"upload_file",description:"Upload a file to the PayTal API. Input may be a file path (absolute, relative, file:// URI) or a base64 string. Allowed types: pdf, jpg, jpeg, png, gif, svg, webp, bmp, tiff.",parameters:{type:"object",properties:{file:{type:"string",description:"The file to be uploaded. Can be a path (absolute, relative, or file:// URI) or a base64-encoded string."}},required:["file"]}}}};i()}catch(e){i(e)}})}};